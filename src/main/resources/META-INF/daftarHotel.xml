<?xml version = "1.0" encoding = "UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="daftarHotel">

    <!-- Meminta List Hotel -->
    <resultMap id="getListHotel" type="com.hotel.database.model.Hotel">
        <result property="name" column="name"/>
        <result property="kota" column="kota"/>
        <result property="kamar" column="kamar"/>
        <result property="terpakai" column="terpakai"/>
        <result property="tersedia" column="tersedia"/>
        <result property="harga" column="harga"/>
    </resultMap>
    <select id="getAllHotelList" resultMap="getListHotel">
        SELECT * FROM listhotel;
    </select>

    <!-- Pencarian Username di DB Pesanan -->
    <resultMap id="getUsernamePesanan" type="com.hotel.database.model.Hotel">
        <result property="username" column="username"/>
    </resultMap>
    <select id="getUsernameFromPesanan" resultMap="getUsernamePesanan">
        SELECT * FROM pesanan WHERE username=#{username}
    </select>

    <!-- Melakukan Input Pesanan ke DB Pesanan -->
    <insert id="insertOrder" parameterType="com.hotel.database.model.OrderHotel">
        INSERT INTO pesanan (username, hotel, durasi, tanggalpesanan, tanggalakhir, tarif) VALUE (#{username}, #{hotel}, #{durasi}, #{tanggalpesan}, #{tanggalakhir}, #{tarif});
    </insert>

    <!-- Melakukan Update Tarif dan Tanggal ke DB Pesanan -->
    <update id="updatePesanan" parameterType="com.hotel.database.model.OrderHotel">
        UPDATE pesanan SET tanggalakhir=#{tanggalakhir} AND tarif=#{tarif} WHERE username=#{username);
    </update>

    <!-- Melakukan Update Database Hotel -->
    <update id="updateHotelList" parameterType="com.hotel.database.model.Hotel">
        UPDATE listhotel SET terpakai=#{terpakai} AND tersedia=#{tersedia};
    </update>

</mapper>